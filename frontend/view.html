<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css">
    <title>Upload Images</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
  </head>
  <body>
    <!-- navbar -->
    <nav class="navbar navbar-expand-lg bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Discord Media</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Upload</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="view.html">View</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="delete.html">Delete</a>
            </li>
          
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <br><br>
    <!-- end navbar -->

    <!-- start upload form -->
    <div class="content">
      <h2>Melihat Gambar</h2>
    <form id="formsg">
      <div>
        <label for="message" class="form-label">Masukan ID</label>
        <input type="text" class="form-control" id="message" aria-describedby="emailHelp">
      </div>
      <br />
      <button type="submit" class="btn btn-primary">Lihat Gambar</button>
    </form>
<br><br>
    <div id="image"></div>
  </div>
    <!-- end upload form  -->
    <script>
  const form = document.getElementById("formsg");
  const messageInput = document.getElementById("message");
  const msgDiv = document.getElementById("image");

  form.addEventListener("submit", function(event) {
    event.preventDefault();
    const message = messageInput.value;

    fetch(`/${message}`)
    .then((res)=>res.json())
    .then((data)=>{
      if (data.status === "success"){
        msgDiv.style.display = "block";
      msgDiv.innerHTML = `<br><br>
      URL: <input type='text' value='${data.data}' id='inputQurl'/>
      <button onclick='copyurl()'>Copy</button>
      <br><br>
      <img src="${data.data}" />`;
        
      }else{
        msgDiv.style.display = "block";
        msgDiv.innerHTML = `Gagal dilihat`
      }
    })
  });
  function copyurl() {
  // di dalam fungsi ini kita seleksi dengan id yang ada di input
  document.querySelector("#inputQurl").select(), document.execCommand("copy");
}
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>
